<!DOCTYPE html>
<html lang="en">
<head>
 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
   
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>
    
 <link rel="stylesheet" type="text/css" href="FinalProj.css" media="screen"/>
   
<script src="lrt_stations.js"></script>
<script src="lrt_tracks.js"></script>
<script src="crimesByCommunityS19.js"></script>

   </head>
   
   
  <body>
  
  
  <h1>Calgary Crime Maps</h1>
  <br>
  <hr>
<h2 class="sign">GEOG586-Final Project <br> Alex, Valery, Mahsa</h2>
      
<ol>
    <li class = "button"> DEFINITIONS </li>
    <li class = "button"> MAPS</li>
      
</ol>      
<div class="definitions">
    
    <h4> Crime </h4>
    <h5> Defined <br> The crime count is based on the most serious violation per incident method that the City of Calgary Police uses.</h5>
      
    <a class="button button1"href="https://www.calgary.ca/cps.html" target="_blank">CALGARY POLICE SERVICES WEBSITE</a>
      </div>
  
  <button class="button" onclick="showmap(1)">Summer 2019</button>
  <button class="button" onclick="showmap(2)">show map 2</button>
  <button class="button" onclick="showmap(3)">show map 3</button>
    
  <div class="mapid" id="mapid"></div>
  <div class="mapid" id="mapid2"></div>
  <div class="mapid" id="mapid3"></div>
      
  <script>
  
  function bindPopupsLRT(feature, layer) {
				layer.bindPopup("<h3>"+feature.properties.STATIONNAM+"</h3>");
		};
      
       function bindPopupsComms(feature, layer) {
		layer.bindPopup("<h3>"+feature.properties.name+"</h3>"+"Grand Theft Autos: "+feature.properties.theftOfVehicle+"<br>Total # of crimes: "+feature.properties.totalCrime);
	}
		
		
  var mymap = L.map('mapid').setView([51.033838, -114.059372], 13);
  
  
  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1IjoibWFoc2FzaGF5YW5mYXIiLCJhIjoiY2tmbWR5dmhxMG83ajJxcHNsNXR6M3NieSJ9.QbKUzHSVoY0Rzuyhg2wxWw'
  }).addTo(mymap);	

	L.geoJSON(lrt_stations, {onEachFeature: bindPopupsLRT}).addTo(mymap);
    L.geoJSON(s19, {onEachFeature: bindPopupsComms}).addTo(mymap);
    L.geoJSON(lrt_tracks).addTo(mymap);
      
//info
      	var info = L.control();

	info.onAdd = function (mymap) {
		this._div = L.DomUtil.create('div', 'info');
		this.update();
		return this._div;
	};

	info.update = function (props) {
		this._div.innerHTML = '<h4>Calgary Crime Count</h4>' +  (props ?
			'<b>' + props.name + '</b><br />' + props.density + ' people / mi<sup>2</sup>'
			: 'Hover over a community');
	};

	info.addTo(mymap);

      //colours in chloropleth
      
    function getColor(d) {
    return d > 400 ? '#800026' :
           d > 100? '#BD0026' :
           d > 80  ? '#E31A1C' :
           d > 60  ? '#FC4E2A' :
           d > 40  ? '#FD8D3C' :
           d > 20   ? '#FEB24C' :
                      '#FFEDA0';
        }  
      
      function style(feature) {
    return {
        fillColor: getColor(feature.properties.totalCrime),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
        };
      }

      L.geoJson(s19, {style: style}).addTo(mymap);
      
     
      //interactions with hover 
      
      
      
      //map 1 legend
      var legend = L.control({position: 'bottomright'});

        legend.onAdd = function (mymap) {

            var div = L.DomUtil.create('div', 'info legend'),
                grades = [0, 20, 40, 60, 80, 100, 400],
                labels = [0, 20, 40, 60, 80, 100, 400];

            for (var i = 0; i < grades.length; i++) {
                div.innerHTML +=
                    '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
                    grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
             
            }

            return div;
        };

        legend.addTo(mymap);
 
      
//map 2

  var mymap2 = L.map('mapid2').setView([51.033838, -114.059372], 13);
  
  
  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1IjoibWFoc2FzaGF5YW5mYXIiLCJhIjoiY2tmbWR5dmhxMG83ajJxcHNsNXR6M3NieSJ9.QbKUzHSVoY0Rzuyhg2wxWw'
}).addTo(mymap2);
      
      L.geoJSON(lrt_tracks).addTo(mymap2);
      L.geoJSON(s19, {onEachFeature: bindPopupsComms}).addTo(mymap2);

	

//map 3

  var mymap3 = L.map('mapid3').setView([51.033838, -114.059372], 13);
  
  
  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1IjoibWFoc2FzaGF5YW5mYXIiLCJhIjoiY2tmbWR5dmhxMG83ajJxcHNsNXR6M3NieSJ9.QbKUzHSVoY0Rzuyhg2wxWw'
}).addTo(mymap3);
      L.geoJSON(lrt_tracks).addTo(mymap3);
      L.geoJSON(s19, {onEachFeature: bindPopupsComms}).addTo(mymap3);


//show and hide maps
function showmap(mapNum) {
    if (mapNum == 1) {
        document.getElementById("mapid").style.display = "block";
		document.getElementById("mapid2").style.display = "none";
		document.getElementById("mapid3").style.display = "none";
    }
	
	if (mapNum == 2) {
        document.getElementById("mapid").style.display = "none";
		document.getElementById("mapid2").style.display = "block";
		document.getElementById("mapid3").style.display = "none";
    }
	
	if (mapNum == 3) {
        document.getElementById("mapid").style.display = "none";
		document.getElementById("mapid2").style.display = "none";
		document.getElementById("mapid3").style.display = "block";
    }
	
};

showmap(1);

</script>
  
  
  </body>
  
  
  </html>